(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{13:function(t,e,a){},14:function(t,e,a){},15:function(t,e,a){},18:function(t,e,a){"use strict";a.r(e);var i=a(2),s=a.n(i),n=a(8),r=a.n(n),c=(a(13),a(4)),o=a(5),l=a(1),h=a(7),d=a(6),g=(a(14),a(15),a(0));a(17)("https://projects.voyager89.net/en/image-search/macy.min.js","Macy");var u=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(t){var i;return Object(c.a)(this,a),(i=e.call(this,t)).state={imgDataOpacity:0,imgDataLeft:0,imgDataTop:0,imgDataVisible:"hidden",imgDataWidth:0,imageDataOutput:""},i.showImage=i.showImage.bind(Object(l.a)(i)),i.hideImageData=i.hideImageData.bind(Object(l.a)(i)),i}return Object(o.a)(a,[{key:"hideImageData",value:function(t){t.preventDefault(),this.setState({imgDataOpacity:0,imgDataVisible:"hidden"})}},{key:"showImage",value:function(t){var e=t.target.dataset.timestamp,a=t.target.attributes.title.textContent.trim().length>1?t.target.attributes.title.textContent:Object(g.jsx)("em",{children:"Image"}),i=Object(g.jsxs)("div",{children:[Object(g.jsxs)("strong",{children:[a.length>35?a.substring(0,35)+"...":a,Object(g.jsx)("br",{}),"by ",Object(g.jsx)("a",{className:"imgdata",href:t.target.dataset.profile,rel:"noreferrer",target:"_blank",children:t.target.dataset.name})]}),Object(g.jsx)("br",{}),Object(g.jsx)("strong",{children:new Date(e).toLocaleDateString()}),Object(g.jsx)("hr",{}),Object(g.jsx)("br",{}),Object(g.jsx)("a",{className:"imgdata",href:t.target.dataset.imgfull,rel:"noreferrer",target:"_blank",children:"Full size"}),Object(g.jsx)("br",{}),Object(g.jsx)("a",{className:"imgdata",href:t.target.dataset.imgreg,rel:"noreferrer",target:"_blank",children:"Regular size"}),Object(g.jsx)("br",{}),Object(g.jsx)("a",{className:"imgdata",href:t.target.dataset.small,rel:"noreferrer",target:"_blank",children:"Small size"}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("hr",{}),Object(g.jsx)("br",{}),Object(g.jsx)("a",{className:"imgdata",href:":OK",onClick:this.hideImageData,children:"OK"}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{})]});this.setState({imgDataLeft:document.body.offsetWidth/2-175,imgDataTop:window.scrollY+100,imgDataOpacity:1,imgDataVisible:"visible",imgDataWidth:t.target.naturalWidth,imageDataOutput:i})}},{key:"removeNewline",value:function(t){return t.replace(/\n/g," ")}},{key:"render",value:function(){var t={backgroundColor:"rgb(255,255,255)",border:"5px #c0c0c0 outset",boxShadow:"0px 0px 100px #000",fontWeight:"bold",padding:10,position:"absolute",left:this.state.imgDataLeft,top:this.state.imgDataTop,opacity:this.state.imgDataOpacity,visibility:this.state.imgDataVisible,width:350,zIndex:999},e=[],a=Object(g.jsx)("div",{className:"imagedata",style:t,children:this.state.imageDataOutput}),i=this.props.data.results,s=0;for(var n in i){++s;var r="",c="",o=i[n],l=o.user.updated_at,h=o.user.name,d=o.user.links.html,u=o.urls.full,b=o.urls.regular,j=o.urls.small,p=o.urls.thumb;void 0!==o.alt_description&&null!=o.alt_description&&(c=o.alt_description),void 0!==o.description&&null!=o.description&&(r=this.removeNewline(o.description)),e.push(Object(g.jsx)("img",{alt:c,title:r,onClick:this.showImage,"data-timestamp":l,"data-name":h,"data-profile":d,"data-imgfull":u,"data-imgreg":b,"data-small":j,src:p},s))}return Object(g.jsxs)("div",{className:"outputdata",children:[a,Object(g.jsx)("div",{className:"imageOutput",children:e})]})}}]),a}(s.a.Component),b=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(){var t;return Object(c.a)(this,a),(t=e.call(this)).state={totalPages:0,outputData:"",currentPage:1,searchCriteria:"",navigationLinks:"",navLinksPosition:0,navLinksBackForwardVisibility:"hidden"},t.doSearch=t.doSearch.bind(Object(l.a)(t)),t.returnKey=t.returnKey.bind(Object(l.a)(t)),t.isStrJSON=t.isStrJSON.bind(Object(l.a)(t)),t.showCriteria=t.showCriteria.bind(Object(l.a)(t)),t.inputCriteria=t.inputCriteria.bind(Object(l.a)(t)),t.showNavigation=t.showNavigation.bind(Object(l.a)(t)),t.pageNavigation=t.pageNavigation.bind(Object(l.a)(t)),t.getNavLinksPosition=t.getNavLinksPosition.bind(Object(l.a)(t)),t}return Object(o.a)(a,[{key:"aboutBox",value:function(t){t.preventDefault(),window.alert("Image Searching application\n\n- built with ReactJS\n- using the Unsplash API (www.unsplash.com)\n\nInitially released on 15 September 2020\nupdated on 18 June 2021.")}},{key:"isStrJSON",value:function(t){try{JSON.parse(t)}catch(e){return!1}return!0}},{key:"showNavigation",value:function(t){for(var e=this,a=[],i=0,s=1;s<=t;++s){i+=50;var n="navLink_".concat(s),r="nav".concat(s===this.state.currentPage?" sel":"");a.push(Object(g.jsx)("a",{className:r,"data-page-id":s,href:":Navigate",onClick:this.doSearch,children:s},n))}this.setState({navLinksWidth:i},(function(){e.setState({navLinksBackForwardVisibility:"visible",navigationLinks:a})}))}},{key:"getNavLinksPosition",value:function(){return Number(this.state.navLinksPosition)}},{key:"pageNavigation",value:function(t){if(t.preventDefault(),t.target.dataset.pageId)switch(t.target.dataset.pageId){case"next":this.getNavLinksPosition()<Number(this.state.navLinksWidth)-600&&this.setState({navLinksPosition:this.getNavLinksPosition()+50});break;case"previous":this.getNavLinksPosition()>0&&this.setState({navLinksPosition:this.getNavLinksPosition()-50})}}},{key:"doSearch",value:function(t){var e=this;if(t.preventDefault(),this.state.searchCriteria.trim().length){var a=1,i="";t&&t.target.dataset.pageId?(a=t.target.dataset.pageId,i=Object(g.jsxs)("strong",{style:{fontSize:36},children:["Loading page ",a,"..."]}),this.setState({currentPage:Number(a)})):(this.setState({currentPage:1}),i=Object(g.jsx)("strong",{style:{fontSize:36},children:"Searching in progress, please wait..."})),this.setState({outputData:i}),window.fetch("https://projects.voyager89.net/en/image-search/call-api.php?query=".concat(this.state.searchCriteria.trim(),"&page=").concat(a)).then((function(t){return t.json()})).then((function(t){var a=0,i=null;"string"==typeof t?0===t.indexOf("Attention!")?(a=1,i=Object(g.jsx)("strong",{style:{fontSize:36},children:t})):0===t.indexOf("Rate Limit Exceeded")&&(a=1,i=Object(g.jsx)("strong",{style:{fontSize:36},children:"Sorry: Rate limit has been exceeded. Up to 50 searches per hour allowed."})):"object"==typeof t&&t.results&&Array.isArray(t.results)?i=Object(g.jsx)(u,{data:t}):(a=1,i=Object(g.jsx)("strong",{style:{fontSize:36},children:"Error: Request could not be completed. Please try again later. If problem persists, please contact admin."})),a||e.showNavigation(Number(t.total_pages)),e.setState({outputData:Object(g.jsx)("div",{children:i}),totalPages:t.total_pages},(function(){window.Macy({container:".imageOutput",trueOrder:!1,waitForImages:!1,margin:24,columns:6,breakAt:{1200:5,940:3,520:2,400:1}})}))}),(function(t){e.setState({outputData:Object(g.jsxs)("strong",{style:{fontSize:36},children:["Error: ",t,"."]})})}))}}},{key:"inputCriteria",value:function(t){var e=t.target.value;e=(e=(e=(e=e.replace(/\\/g,"")).replace(/\//g,"")).replace(/'/g,"")).replace(/"/g,""),this.setState({searchCriteria:e})}},{key:"returnKey",value:function(t){"Enter"===t.key&&this.state.searchCriteria.trim().length&&this.doSearch(t)}},{key:"showCriteria",value:function(){var t="",e=this.state.searchCriteria;return(t=e.trim().length?e:"").length>10?t.substring(0,10)+"...":t}},{key:"magnifyingGlass",value:function(){return(new DOMParser).parseFromString("&#X1F50D;","text/html").body.textContent}},{key:"render",value:function(){return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)("nav",{children:Object(g.jsx)("a",{href:":About",onClick:this.aboutBox,children:"About"})}),Object(g.jsxs)("main",{children:[Object(g.jsxs)("h1",{children:["Unsplash Image Search",Object(g.jsx)("br",{}),"\xa0",this.showCriteria(),"\xa0"]}),Object(g.jsxs)("section",{className:"search",children:[Object(g.jsx)("a",{href:":Search",onClick:this.doSearch,children:this.magnifyingGlass()}),Object(g.jsx)("input",{id:"imageQuery",onChange:this.inputCriteria,maxLength:"20",onKeyDown:this.returnKey,placeholder:"Free hi-res photos",title:"Search here (press Enter)",type:"text",defaultValue:""})]}),Object(g.jsxs)("section",{className:"outputNavigation",children:[Object(g.jsx)("a",{className:"nav pageNavigate","data-page-id":"previous",href:":Previous",onClick:this.pageNavigation,style:{visibility:this.state.navLinksBackForwardVisibility},children:"<<"}),Object(g.jsx)("div",{id:"navLinksBox",children:Object(g.jsx)("div",{style:{position:"relative",right:this.state.navLinksPosition,width:this.state.navLinksWidth},children:this.state.navigationLinks})}),Object(g.jsx)("a",{className:"nav pageNavigate","data-page-id":"next",href:":Next",onClick:this.pageNavigation,style:{visibility:this.state.navLinksBackForwardVisibility},children:">>"})]}),Object(g.jsx)("section",{className:"output",children:this.state.outputData})]})]})}}]),a}(s.a.Component),j=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,19)).then((function(e){var a=e.getCLS,i=e.getFID,s=e.getFCP,n=e.getLCP,r=e.getTTFB;a(t),i(t),s(t),n(t),r(t)}))};r.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(b,{})}),document.getElementById("root")),j()}},[[18,1,2]]]);
//# sourceMappingURL=main.93094fb0.chunk.js.map